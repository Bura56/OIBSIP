import speech_recognition as sr
import pyttsx3

# Initialize text-to-speech engine
engine = pyttsx3.init()

# Initialize recognizer
recognizer = sr.Recognizer()

# Function to speak
def speak(text):
    engine.say(text)
    engine.runAndWait()


# Function to handle greetings
def greet():
    return "Hello! How can I assist you today?"

# Function to retrieve the current time
def get_time():
    # Implement code to get the current time
    return "The current time is..."

# Function to handle web search
def search_web(query):
    # Implement code to search the web based on 'query'
    return "Here is what I found..."

def recognize_speech():
    with sr.Microphone() as source:
        print("Listening...")
        recognizer.adjust_for_ambient_noise(source)
        audio = recognizer.listen(source)

    try:
        print("Recognizing...")
        command = recognizer.recognize_google(audio)  # Google Web Speech API
        return command.lower()
    except sr.UnknownValueError:
        return "Sorry, I couldn't understand that."
    except sr.RequestError:
        return "Sorry, there was an error processing the request."
# Main loop for interaction
if __name__ == "__main__":
    speak(greet())  # Greet the user

    while True:
        command = recognize_speech()  # Get user command
        print("User:", command)

        if "hello" in command:
            speak(greet())
        elif "time" in command:
            speak(get_time())
        elif "search" in command:
            query = command.replace("search", "").strip()
            speak(search_web(query))
        elif "exit" in command:
            speak("Goodbye!")
            break
